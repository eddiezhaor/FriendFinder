<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="style2.css">
    <link href="https://fonts.googleapis.com/css?family=Indie+Flower|Bellefair">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">

    <style>
        select {
            width: 30%;
        }
        
        #title {
            font-family: 'Indie Flower', cursive;
        }
        
        h3 {
            font-family: 'Bellefair', serif;
        }
        
        .slide-container {
            overflow: auto;
            white-space: nowrap
        }
    </style>
</head>

<body>
    <div class="container">
        <h2 class="text-center" id="title">Survey Question</h2>
        <hr>
        <h3>Name (Required)</h3>
        <input class="form-control name" name="name" type="text">
        <h3>Link to your photo (Required)</h3>
        <input class="form-control link" type="text">
        <hr>
        <div class="slide-container">
            <img style="width:20%;height:auto" src="/images/dog1.jpeg" />
            <img style="width:20%;height:auto" src="/images/dog2.jpg" />
            <img style="width:20%;height:auto" src="/images/dog3.jpg" />
            <img style="width:20%;height:auto" src="/images/dog4.jpeg" />
            <img style="width:20%;height:auto" src="/images/dog5.jpg" />
            <img style="width:20%;height:auto" src="/images/dog6.jpg" />
            <img style="width:20%;height:auto" src="/images/dog7.jpg" />
        </div>
        <iframe id="vid" style="float:right; margin-top:100px;margin-right:80px;" width="560" height="315" src="https://www.youtube.com/embed/rD7tQ52dY44" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
        <h3>Question1</h3>
        <!-- <div style=" clear: both;"></div> -->
        <h4>woof-woof-woof?</h4>
        <select class="chosen-select q1">
                <option ></option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
        </select>
        <h3>Question2</h3>
        <h4>woof-woof-woof-woofwoof-woof?</h4>
        <select class="chosen-select q2">
                <option value></option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
        </select>
        <h3>Question3</h3>
        <h4>arf-arf-arf?</h4>
        <select class="chosen-select q3">
                <option value></option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
        </select>
        <h3>Question4</h3>
        <h4>bow-wow-bow-wow?</h4>
        <select class="chosen-select q4">
                <option value></option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
        </select>
        <h3>Question5</h3>
        <h4>ruff-ruff?</h4>
        <select class="chosen-select q5">
                <option value></option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
        </select>
        <h3>Question6</h3>
        <h4>yap-yap-yap-yap?</h4>
        <select class="chosen-select q6">
                <option value></option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
        </select>
        <h3>Question7</h3>
        <h4>woof-woof-woof-woof?</h4>
        <select class="chosen-select q7">
                <option value></option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
        </select>
        <h3>Question8</h3>
        <h4>woof-woof-woof-woof-woof-woof?</h4>
        <select class="chosen-select q8">
                <option value></option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
        </select>
        <h3>Question9</h3>
        <h4>woof-woof-woof-arf?</h4>
        <select class="chosen-select q9">
                <option value></option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
        </select>
        <h3>Question10</h3>
        <h4>bow-wow-bow-wow-woof-woof-woof-woof?</h4>
        <select class="chosen-select q10">
                <option value></option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
        </select>
        <br>
        <br>

        <button type="submit" class="btn btn-primary btn-lg btn-block" id="submit"><i class="fa fa-check-circle" aria-hidden="true" style="margin-right:4px;"></i>Submit</button>
        <hr>
        <footer class="footer">
            <div class="container">
                <p><a href="/api/users">API Users Link</a> | <a href="https://github.com/eddiezhaor">GitHub Repo</a></p>
            </div>
        </footer>
    </div>
    <div class="modal fade" id="myModal" role="dialog">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">WOW! IT IS A MATCH!!</h4>
                </div>
                <div class="modal-body" style="text-align:center">
                    <img id="match" style="width:250px;height:auto" src="">
                    <p id="target"></p>
                </div>
                <div class="modal-footer">
                    <a href="/"><button class="btn btn-primary " style="display:inline-block;margin-left:30%">Main Page</button></a>
                    <a href="/survey"><button class="btn btn-primary "style="display:inline-block;">Retake the Survey!</button></a>
                </div>
            </div>

        </div>
    </div>
    <div class="load" style="display:none;">
        <i class="fa fa-heartbeat fa-3x"><br><br><br><p style="color:black">PAIRING.........</p></i>
    </div>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <script>
        var imageLink = ["./images/dog1.jpeg", "./images/dog2.jpg", "./images/dog3.jpg", "./images/dog4.jpeg", "./images/dog5.jpg", "./images/dog6.jpg", "./images/dog7.jpg", "./images/dog8.jpg"]

        $("#submit").on("click", function(e) {
            event.preventDefault(e);

            if ($("select").val() == "") {
                alert("Please answer all the questions")
            } else if ($(".name").val() == "" || $(".link").val() == "") {
                alert("Please enter your name and profile link!")
            } else {
                $('iframe').attr('src', $('iframe').attr('src'));
                $("#myModal").modal("hide")


                var users = {
                    name: $(".name").val().trim(),
                    photo: $(".link").val().trim(),
                    scores: [
                        $(".q1").val().trim(),
                        $(".q2").val().trim(),
                        $(".q3").val().trim(),
                        $(".q4").val().trim(),
                        $(".q5").val().trim(),
                        $(".q6").val().trim(),
                        $(".q7").val().trim(),
                        $(".q8").val().trim(),
                        $(".q9").val().trim(),
                        $(".q10").val().trim()
                    ]
                };

                $.post("/api/users", users).done(function(data) {
                    $("#target").text(data.name);
                    $("#match").attr("src", imageLink[data.number])
                })
                $(".container").fadeOut(1000, function() {

                    $(".load").fadeIn(1500, function() {
                        $(".load").fadeOut(2000, function() {

                            $("#myModal").modal("show");

                        })
                    })
                })
            }
        })
    </script>
</body>

</html>